-- Testing to see if the encapsulation stuff in Lua works

String = {}
String_mt = {}

function String:new(s)
	 class = {}
	 class.value = s

	 -- Get 'pwd' so we know what our root directory is
	 local pwd_fp = io.popen("pwd")
	 class.root = pwd_fp:read()
	 pwd_fp:close()


	 setmetatable(class, String_mt)
	 String_mt.__index = String
   	 return (class)
end

function String:get_value()
	 self:debugit("value = " .. self.value)
   return self.value
end

function String:get_root()
	 self:debugit("root = " .. self.root)
	 return self.root
end

function String:debugit(what)
	 print ("DEBUG: " .. what)
end


String_mt.__index = String

s = String:new('I am a string')
v = s:get_value()
assert(v,'I am a string')

root = s:get_root()
print ("root: " .. root)